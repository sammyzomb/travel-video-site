<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>航向世界旅遊頻道</title>
  <style>
    body {
      margin: 0;
      font-family: 'Noto Sans TC', sans-serif;
      background: #f0f4f9;
    }
    .navbar {
      position: sticky;
      top: 0;
      background: white;
      padding: 16px 5%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      z-index: 100;
    }
    .navbar .logo {
      font-weight: bold;
      font-size: 1.4rem;
      color: #28445e;
      text-decoration: none;
    }
    .navbar nav a {
      margin-left: 28px;
      text-decoration: none;
      color: #28445e;
      font-weight: 500;
    }
    .navbar nav a:hover {
      color: #72bbf7;
      text-decoration: underline;
    }
    .hero {
      position: relative;
      width: 100vw;
      height: 60vh;
      min-height: 320px;
      max-height: 480px;
      overflow: hidden;
      margin-bottom: 0;
      background: #222;
    }
    .yt-bg-wrapper {
      position: absolute;
      left: 50%; top: 50%;
      width: 120vw; height: 120vh;
      transform: translate(-50%, -50%);
      z-index: 1;
      pointer-events: none;
      overflow: hidden;
    }
    #ytPlayer, #ytPlayer > div, #ytPlayer iframe {
      position: absolute !important;
      width: 120vw !important;
      height: 120vh !important;
      left: 0; top: 0;
      border: none;
      z-index: 1;
      pointer-events: none;
      background: #222;
    }
    /* HERO 主標動畫（無背景/無陰影/更小字體/更滑順動畫） */
    .hero-main-title {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      color: #222;
      z-index: 4;
      text-align: center;
      width: 100%;
      transition: all 1.6s cubic-bezier(.83,0,.17,1);
      font-weight: 800;
      font-size: 1.5rem;
      background: none;
      box-shadow: none;
      border-radius: 0;
      padding: 0;
    }
    .hero-main-title.mini {
      top: auto; left: 36px; bottom: 36px; right: auto;
      transform: none;
      width: 320px;
      max-width: 80vw;
      font-size: 0.8rem;
      color: #244;
      text-align: left;
      background: none;
      box-shadow: none;
      border-radius: 0;
      opacity: 0.96;
      padding: 0;
    }
    .hero-caption {
      position: absolute;
      right: 32px; bottom: 32px;
      background: rgba(0,0,0,0.46);
      color: #fff;
      z-index: 10;
      padding: 18px 32px 18px 24px;
      border-radius: 16px 16px 16px 32px;
      box-shadow: 0 8px 32px 2px rgba(0,0,0,0.13);
      min-width: 220px;
      min-height: 48px;
      opacity: 0;
      pointer-events: none;
      transform: translateY(60px);
      transition: opacity .7s, transform .7s;
      font-size: 1.17rem;
      display: flex;
      flex-direction: column;
      gap: 0.3em;
    }
    .hero-caption.visible {
      opacity: 1;
      pointer-events: auto;
      transform: translateY(0);
    }
    .hero-caption .cap-title {
      font-size: 1.22em;
      font-weight: 700;
      margin-bottom: 4px;
      color: #fff;
      letter-spacing: 1px;
    }
    .hero-caption .cap-desc {
      font-size: 1em;
      color: #e9f6fd;
      font-weight: 400;
    }
    @media (max-width: 768px) {
      .hero {height: 44vh; min-height: 180px;}
      .yt-bg-wrapper {width: 140vw; height: 140vh;}
      #ytPlayer, #ytPlayer > div, #ytPlayer iframe {width: 140vw !important; height: 140vh !important;}
      .hero-main-title {font-size: 1.02rem;}
      .hero-main-title.mini {width: 90vw; left: 8px; bottom: 12px; padding: 0;}
      .hero-caption {right: 10px; bottom: 12px; padding: 10px 12px 10px 12px; font-size: 1em;}
    }
  </style>
</head>
<body>
  <div class="navbar">
    <a class="logo" href="index.html">
      <img src="logo.png" alt="航向世界旅遊台 LOGO" height="44" />
    </a>
    <nav>
      <a href="index.html">首頁</a>
      <a href="program.html">節目表</a>
      <a href="vod.html">隨選影片</a>
      <a href="category.html">世界分區</a>
    </nav>
  </div>
  <div class="hero">
    <div class="yt-bg-wrapper">
      <div id="ytPlayer"></div>
    </div>
    <!-- <div class="hero-overlay"></div> 已移除 -->
    <div class="hero-main-title" id="heroMainTitle">
      <h1 style="margin:0 0 10px 0; font-size:1em; font-weight:900;">探索世界，從這裡開始</h1>
      <p style="font-size:0.78em; font-weight:500; margin:0;">Live 世界旅遊新視野</p>
    </div>
    <div class="hero-caption" id="heroCaption"></div>
  </div>

  <script src="https://www.youtube.com/iframe_api"></script>
  <script>
    let videos = [];
    let current = 0, player;
    let miniTitle = false;

    // 載入 hero.json
    fetch('hero.json')
      .then(res => res.json())
      .then(data => {
        videos = data;
        initHero();
      });

    function initHero() {
      showCaption(false); // 預設隱藏右下說明
      setTimeout(()=>{
        // 10秒後主標縮小滑到左下角
        document.getElementById('heroMainTitle').classList.add('mini');
        miniTitle = true;
        showCaption(true);
      }, 10000); // 10 秒

      // 載入影片
      if(window.YT && window.YT.Player){
        onYouTubeIframeAPIReady();
      } else {
        window.onYouTubeIframeAPIReady = onYouTubeIframeAPIReady;
      }
    }

    function onYouTubeIframeAPIReady() {
      player = new YT.Player('ytPlayer', {
        width: '120vw',
        height: '120vh',
        videoId: videos[current].id,
        playerVars: {
          autoplay: 1,
          mute: 1,
          controls: 0,
          rel: 0,
          showinfo: 0,
          modestbranding: 1,
          loop: 0,
          playlist: videos[current].id
        },
        events: {
          onReady: e => { e.target.mute(); e.target.playVideo(); },
          onStateChange: onPlayerStateChange
        }
      });
    }

    function onPlayerStateChange(event) {
      if (event.data === YT.PlayerState.ENDED) {
        showVideo((current + 1) % videos.length);
      }
    }

    function showVideo(idx) {
      current = idx;
      player.loadVideoById(videos[idx].id);
      updateCaption();
    }

    function showCaption(visible = true) {
      const cap = document.getElementById('heroCaption');
      if (visible) {
        updateCaption();
        cap.classList.add('visible');
      } else {
        cap.classList.remove('visible');
      }
    }

    function updateCaption() {
      const cap = document.getElementById('heroCaption');
      if (videos[current]) {
        cap.innerHTML =
          `<div class="cap-title">${videos[current].title || ""}</div>
           <div class="cap-desc">${videos[current].desc || ""}</div>`;
      }
    }

    // 每次輪播自動顯示標題
    setInterval(() => {
      if (miniTitle && player) {
        showCaption(true);
      }
    }, 6000);
  </script>
</body>
</html>
