<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>航向世界旅遊頻道</title>
  <style>
    html, body { height: 100%; margin: 0; padding: 0; }
    body { min-height: 100vh; font-family: 'Noto Sans TC', sans-serif; background: #f0f4f9; }
    .navbar {
      position: sticky; top: 0; background: #fff; z-index: 100; box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      display: flex; justify-content: space-between; align-items: center;
      padding: 5px 3.8%; height: 58px;
    }
    .navbar .logo img { height: 38px; }
    .navbar nav { display: flex; align-items: center; flex-wrap: nowrap; }
    .navbar nav a {
      margin-left: 18px; text-decoration: none; color: #28445e;
      font-weight: 500; font-size: 1rem; letter-spacing: 0.5px;
      border: none; background: none; transition: color 0.17s;
      line-height: 1; padding: 0 3px; border-radius: 4px; outline: none;
      position: relative; display: inline-flex; align-items: center;
    }
    .navbar nav a:hover { color: #2b71d2; background: #e8f3ff; }
    .login-link:hover { color: #2b71d2; background: #e8f3ff; }
    .nav-icon { width: 20px; height: 20px; margin-right: 6px; vertical-align: middle; display: inline-block; }
    @media screen and (max-width: 900px) {
      .nav-text { display: none; }
      .nav-icon { margin-right: 0 !important; }
    }

    /* --- HERO 視訊左右全滿版 --- */
    .hero {
      position: relative; width: 100vw; height: 80vh; min-height: 400px; max-height: 750px; overflow: hidden; margin-bottom: 0; background: #111;
    }
    .hero-iframe-bg {
      position: absolute; z-index: 1; top: 0; left: 0; width: 100vw; height: 100%; pointer-events: none; background: #111;
    }
    .hero-iframe-bg iframe {
      width: 100vw; height: 100%; border: none;
      min-width: 100vw; min-height: 100%; /* 防止黑邊 */
    }
    .hero-main-title {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      color: #fff; z-index: 4; text-align: center; width: 100%; font-weight: 800; font-size: 2.3rem;
      text-shadow: 0 2px 18px rgba(0,0,0,0.23);
      pointer-events: none;
    }
    .hero-main-title p { font-size: 1.18rem; font-weight: 400; color: #fff; text-shadow: 0 2px 16px rgba(0,0,0,0.23); }
    .hero-caption {
      position: absolute; right: 36px; bottom: 30px; color: #fff; z-index: 5;
      min-width: 180px; min-height: 38px; font-size: 1.1rem;
      text-align: right; pointer-events: none;
      text-shadow: 0 2px 8px rgba(0,0,0,0.24);
    }
    .cap-title { font-size: 1.15em; font-weight: 700; margin-bottom: 4px; color: #fff; letter-spacing: 1px;}
    .cap-desc { font-size: 0.97em; color: #e9f6fd; font-weight: 400;}
    /* 不要黑色底，不要 box-shadow */

    @media (max-width: 700px) {
      .hero { height: 48vh; min-height: 210px; max-height: 380px;}
      .hero-main-title { font-size: 1.2rem; }
      .hero-main-title h1 { font-size: 1.7rem;}
      .hero-caption { right: 10px; bottom: 16px; font-size: 1rem;}
    }

    .video-section { padding: 44px 5% 54px 5%; background: #fff; }
    .video-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(270px, 1fr)); gap: 24px; }
    .video-card { background: #f9f9f9; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.05); transition: transform 0.3s; }
    .video-card:hover { transform: translateY(-4px); }
    .video-thumb img { width: 100%; height: 220px; object-fit: cover; display: block; }
    .video-content { padding: 16px; }
    .video-tags { font-size: 0.8rem; color: #666; margin-bottom: 8px; }
    .video-title { font-size: 1.08rem; font-weight: 600; color: #1a1a1a; margin: 0 0 8px; }
    .video-desc { font-size: 0.92rem; color: #2b71d2; margin-bottom: 12px; }
    .video-cta { display: inline-block; padding: 8px 16px; background: #2b71d2; color: white; border-radius: 99px; font-size: 0.9rem; text-decoration: none; cursor: pointer; border: none; }
    .fullscreen-player { position: fixed; inset: 0; background: #000; display: none; align-items: center; justify-content: center; z-index: 9999; }
    .fullscreen-player.active { display: flex; }
    .fullscreen-player iframe { width: 100vw; height: 100vh; border: none; }
  </style>
</head>
<body>
  <div class="navbar">
    <a class="logo" href="index.html"><img src="logo.png" alt="LOGO" /></a>
    <nav>
      <a href="index.html"><svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="#28445e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9L12 2L21 9V20a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg><span class="nav-text">首頁</span></a>
      <a href="videos.html"><svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="#28445e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><path d="M8 21h8m-4-4v4"/></svg><span class="nav-text">最新影片</span></a>
      <a href="schedule.html"><svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="#28445e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class="nav-text">節目表</span></a>
      <a href="topics.html"><svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="#28445e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg><span class="nav-text">主題探索</span></a>
      <a href="vod.html"><svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="#28445e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 3 21 3 21 8"/><line x1="4" y1="20" x2="21" y2="3"/><polyline points="21 16 21 21 16 21"/><line x1="15" x2="21" y1="15" y2="21"/></svg><span class="nav-text">隨選影片</span></a>
      <a href="area.html"><svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke="#28445e" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg><span class="nav-text">世界分區</span></a>
      <a href="login.html" class="login-link"><svg class="nav-icon" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="10" cy="7" r="4.5" stroke="#28445e" stroke-width="2"/><ellipse cx="10" cy="15.2" rx="6.8" ry="3.2" stroke="#28445e" stroke-width="2"/></svg><span class="nav-text">會員登入</span></a>
    </nav>
  </div>

  <div class="hero">
    <div class="hero-iframe-bg" id="heroBg"></div>
    <div class="hero-main-title">
      <h1>探索世界，從這裡開始</h1>
      <p>Live 世界旅遊新視野</p>
    </div>
    <div class="hero-caption" id="heroCaption"></div>
  </div>

  <section class="video-section">
    <h2 style="font-size:1.8rem; margin-bottom:24px; color:#222;">精選節目推薦</h2>
    <div class="video-grid" id="featured-videos"></div>
  </section>

  <div class="fullscreen-player" id="fullscreenPlayer"></div>

  <script>
    // 影片資料初始化
    let videos = [], current = 0;
    let ytIdToIndex = {};
    // 讀取 hero.json
    fetch('hero.json').then(res => res.json()).then(data => {
      videos = data;
      videos.forEach((v, i) => ytIdToIndex[v.id] = i);
      loadHeroVideo(videos[0].id);
      updateCaption(0);
    });

    // 載入全滿版背景 YouTube
    function loadHeroVideo(videoId) {
      const container = document.getElementById("heroBg");
      container.innerHTML = `
        <iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1&mute=1&controls=0&showinfo=0&rel=0&modestbranding=1&loop=1&playlist=${videoId}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
      `;
    }
    // 更新右下角說明
    function updateCaption(idx) {
      const cap = document.getElementById('heroCaption');
      if (videos[idx]) {
        cap.innerHTML = `<div class="cap-title">${videos[idx].title || ''}</div><div class="cap-desc">${videos[idx].desc || ''}</div>`;
      }
    }

    // 精選節目卡片
    fetch("featured_updated.json")
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById("featured-videos");
        data.forEach(video => {
          const card = document.createElement("div");
          card.className = "video-card";
          const thumb = video.image ? video.image : `https://img.youtube.com/vi/${video.youtubeId}/hqdefault.jpg`;
          card.innerHTML = `
            <div class="video-thumb">
              <img src="${thumb}" alt="${video.title}">
            </div>
            <div class="video-content">
              <div class="video-tags">${video.tags.join(' / ')}</div>
              <div class="video-title">${video.title}</div>
              <div class="video-desc">${video.description}</div>
              <button onclick="openFullscreenPlayer('${video.youtubeId}')" class="video-cta">${video.cta}</button>
            </div>`;
          container.appendChild(card);
        });
      });

    // 全螢幕播放
    function openFullscreenPlayer(videoId) {
      const container = document.getElementById("fullscreenPlayer");
      container.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1&rel=0&modestbranding=1&controls=1&enablejsapi=1" allow="autoplay; fullscreen"></iframe>`;
      container.classList.add("active");
    }
    function closeFullscreenPlayer() {
      const container = document.getElementById("fullscreenPlayer");
      container.innerHTML = "";
      container.classList.remove("active");
    }
    window.addEventListener("keydown", (e) => { if (e.key === "Escape") closeFullscreenPlayer(); });
  </script>
</body>
</html>
