<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å¾Œå°ä¸»æ§å° - èˆªå‘ä¸–ç•Œæ—…éŠé »é“</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    
    .container { 
      max-width: 1200px; 
      margin: 0 auto; 
      padding: 20px; 
    }
    
    .header { 
      background: white; 
      padding: 30px; 
      border-radius: 15px; 
      margin-bottom: 30px; 
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      text-align: center;
    }
    
    .header h1 { 
      color: #2b71d2; 
      margin-bottom: 10px; 
      font-size: 2.5rem;
    }
    
    .header p { 
      color: #666; 
      font-size: 1.1rem;
    }
    
    .user-info { 
      background: #e3f2fd; 
      padding: 15px 20px; 
      border-radius: 10px; 
      margin-bottom: 30px; 
      display: flex; 
      justify-content: space-between; 
      align-items: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }
    
    .user-info .user-details { 
      color: #1976d2; 
      font-weight: 600; 
      font-size: 1.1rem;
    }
    
    .user-info .logout-btn { 
      background: #f44336; 
      color: white; 
      border: none; 
      padding: 10px 20px; 
      border-radius: 8px; 
      cursor: pointer; 
      font-size: 14px;
      transition: all 0.3s ease;
    }
    
    .user-info .logout-btn:hover { 
      background: #d32f2f; 
      transform: translateY(-2px);
    }
    
    .dashboard-grid { 
      display: grid; 
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); 
      gap: 30px; 
      margin-bottom: 30px;
    }
    
    .module-card { 
      background: white; 
      padding: 30px; 
      border-radius: 15px; 
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      text-align: center;
      transition: all 0.3s ease;
      cursor: pointer;
      border: 3px solid transparent;
    }
    
    .module-card:hover { 
      transform: translateY(-10px);
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
      border-color: #2b71d2;
    }
    
    .module-icon { 
      font-size: 4rem; 
      margin-bottom: 20px; 
      display: block;
    }
    
    .module-title { 
      color: #333; 
      font-size: 1.5rem; 
      font-weight: 600; 
      margin-bottom: 15px;
    }
    
    .module-description { 
      color: #666; 
      margin-bottom: 25px; 
      line-height: 1.6;
    }
    
    .module-stats { 
      background: #f8f9fa; 
      padding: 15px; 
      border-radius: 10px; 
      margin-bottom: 20px;
      font-size: 0.9rem;
      color: #666;
    }
    
    .enter-btn { 
      background: linear-gradient(135deg, #2b71d2, #1e5bb8); 
      color: white; 
      border: none; 
      padding: 12px 30px; 
      border-radius: 8px; 
      cursor: pointer; 
      font-size: 1rem; 
      font-weight: 600;
      transition: all 0.3s ease;
      width: 100%;
    }
    
    .enter-btn:hover { 
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(43, 113, 210, 0.3);
    }
    
    .quick-actions { 
      background: white; 
      padding: 25px; 
      border-radius: 15px; 
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }
    
    .quick-actions h3 { 
      color: #2b71d2; 
      margin-bottom: 20px; 
      font-size: 1.3rem;
    }
    
    .action-buttons { 
      display: flex; 
      gap: 15px; 
      flex-wrap: wrap;
    }
    
    .action-btn { 
      background: #f8f9fa; 
      color: #333; 
      border: 2px solid #e9ecef; 
      padding: 10px 20px; 
      border-radius: 8px; 
      cursor: pointer; 
      font-size: 14px;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }
    
    .action-btn:hover { 
      background: #2b71d2; 
      color: white; 
      border-color: #2b71d2;
      transform: translateY(-2px);
    }
    
    .status-indicator { 
      display: inline-block; 
      width: 10px; 
      height: 10px; 
      border-radius: 50%; 
      margin-right: 8px;
    }
    
    .status-online { background: #28a745; }
    .status-offline { background: #dc3545; }
    
    @media (max-width: 768px) {
      .dashboard-grid { 
        grid-template-columns: 1fr; 
        gap: 20px;
      }
      
      .module-card { 
        padding: 20px; 
      }
      
      .action-buttons { 
        flex-direction: column;
      }
      
      .header h1 { 
        font-size: 2rem; 
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ğŸ›ï¸ å¾Œå°ç®¡ç†ä¸»æ§å°</h1>
      <p>èˆªå‘ä¸–ç•Œæ—…éŠé »é“ - ç¯€ç›®ç®¡ç†ç³»çµ±</p>
    </div>
    
    <!-- ç”¨æˆ¶è³‡è¨Šé¡¯ç¤º -->
    <div class="user-info" id="userInfo" style="display: none;">
      <div class="user-details" id="userDetails"></div>
      <button class="logout-btn" onclick="logout()">ç™»å‡ºç³»çµ±</button>
    </div>
    
    <!-- ç®¡ç†æ¨¡çµ„å¡ç‰‡ -->
    <div class="dashboard-grid">
      <!-- æœˆæ›†ç¯€ç›®ç®¡ç† -->
      <div class="module-card" onclick="navigateToModule('admin-calendar.html')">
        <span class="module-icon">ğŸ“…</span>
        <h2 class="module-title">æœˆæ›†ç¯€ç›®ç®¡ç†</h2>
        <p class="module-description">
          ä»¥æœˆæ›†å½¢å¼ç®¡ç†ç¯€ç›®æ’ç¨‹ï¼Œæ”¯æ´æ‹–æ‹½ç·¨è¼¯ã€ç¯„æœ¬å¥—ç”¨å’Œæ‰¹é‡æ“ä½œã€‚
          é©åˆè¦–è¦ºåŒ–ç¯€ç›®å®‰æ’å’Œæ™‚é–“ç®¡ç†ã€‚
        </p>
        <div class="module-stats">
          <span class="status-indicator status-online"></span>
          ç³»çµ±ç‹€æ…‹ï¼šæ­£å¸¸é‹ä½œ
        </div>
        <button class="enter-btn">é€²å…¥æœˆæ›†ç®¡ç†</button>
      </div>
      
      <!-- ç¯€ç›®è¡¨ç®¡ç† -->
      <div class="module-card" onclick="navigateToModule('admin-schedule.html')">
        <span class="module-icon">ğŸ¯</span>
        <h2 class="module-title">ç¯€ç›®è¡¨ç®¡ç†</h2>
        <p class="module-description">
          å‚³çµ±åˆ—è¡¨å¼ç¯€ç›®ç®¡ç†ï¼Œæ”¯æ´æ‰¹é‡æ·»åŠ ã€CSVåŒ¯å…¥åŒ¯å‡ºå’Œç¯„æœ¬åŠŸèƒ½ã€‚
          é©åˆå¤§é‡ç¯€ç›®è³‡æ–™çš„å¿«é€Ÿè™•ç†ã€‚
        </p>
        <div class="module-stats">
          <span class="status-indicator status-online"></span>
          ç³»çµ±ç‹€æ…‹ï¼šæ­£å¸¸é‹ä½œ
        </div>
        <button class="enter-btn">é€²å…¥ç¯€ç›®è¡¨ç®¡ç†</button>
      </div>
      
      <!-- æ­¸æª”ç®¡ç† -->
      <div class="module-card" onclick="navigateToModule('admin-archive.html')">
        <span class="module-icon">ğŸ“º</span>
        <h2 class="module-title">æ­¸æª”ç®¡ç†</h2>
        <p class="module-description">
          ç®¡ç†å·²æ’­å‡ºçš„ç¯€ç›®æ­¸æª”ï¼Œæ”¯æ´åˆ†é¡ç¯©é¸ã€çµ±è¨ˆåˆ†æå’Œæ‰¹é‡ç·¨è¼¯ã€‚
          é©åˆç¯€ç›®è³‡æ–™çš„é•·æœŸç®¡ç†å’Œåˆ†æã€‚
        </p>
        <div class="module-stats">
          <span class="status-indicator status-online"></span>
          ç³»çµ±ç‹€æ…‹ï¼šæ­£å¸¸é‹ä½œ
        </div>
        <button class="enter-btn">é€²å…¥æ­¸æª”ç®¡ç†</button>
      </div>
    </div>
    
    <!-- å¿«é€Ÿæ“ä½œ -->
    <div class="quick-actions">
      <h3>âš¡ å¿«é€Ÿæ“ä½œ</h3>
      <div class="action-buttons">
        <a href="admin-test.html" class="action-btn">ğŸ”§ ç³»çµ±æ¸¬è©¦</a>
        <a href="admin-login.html" class="action-btn">ğŸ”‘ é‡æ–°ç™»å…¥</a>
        <button class="action-btn" onclick="clearCache()">ğŸ—‘ï¸ æ¸…é™¤å¿«å–</button>
        <button class="action-btn" onclick="showSystemInfo()">â„¹ï¸ ç³»çµ±è³‡è¨Š</button>
      </div>
    </div>
  </div>

  <script>
    // ç™»å…¥é©—è­‰æª¢æŸ¥
    function checkAuth() {
      const user = sessionStorage.getItem('adminUser');
      const loginTime = sessionStorage.getItem('loginTime');
      
      if (!user || !loginTime) {
        // æœªç™»å…¥ï¼Œè·³è½‰åˆ°ç™»å…¥é é¢
        window.location.href = 'admin-login.html';
        return null;
      }
      
      // æª¢æŸ¥ç™»å…¥æ˜¯å¦è¶…é 8 å°æ™‚
      const loginDate = new Date(loginTime);
      const now = new Date();
      const hoursDiff = (now - loginDate) / (1000 * 60 * 60);
      
      if (hoursDiff >= 8) {
        // ç™»å…¥å·²éæœŸï¼Œæ¸…é™¤ session ä¸¦è·³è½‰åˆ°ç™»å…¥é é¢
        sessionStorage.removeItem('adminUser');
        sessionStorage.removeItem('loginTime');
        window.location.href = 'admin-login.html';
        return null;
      }
      
      return JSON.parse(user);
    }
    
    // ç™»å‡ºåŠŸèƒ½
    function logout() {
      sessionStorage.removeItem('adminUser');
      sessionStorage.removeItem('loginTime');
      window.location.href = 'admin-login.html';
    }
    
    // æ›´æ–°ç”¨æˆ¶è³‡è¨Šé¡¯ç¤º
    function updateUserInfo() {
      const userInfo = document.getElementById('userInfo');
      const userDetails = document.getElementById('userDetails');
      
      if (currentUser) {
        userInfo.style.display = 'flex';
        userDetails.innerHTML = `
          <span class="status-indicator status-online"></span>
          æ­¡è¿ï¼Œ${currentUser.name} (${currentUser.role}) | 
          ç™»å…¥æ™‚é–“ï¼š${new Date(sessionStorage.getItem('loginTime')).toLocaleString()}
        `;
      }
    }
    
    // å°èˆªåˆ°æŒ‡å®šæ¨¡çµ„
    function navigateToModule(url) {
      // æ·»åŠ éæ¸¡å‹•ç•«æ•ˆæœ
      document.body.style.opacity = '0.7';
      setTimeout(() => {
        window.location.href = url;
      }, 300);
    }
    
    // æ¸…é™¤å¿«å–
    function clearCache() {
      if (confirm('ç¢ºå®šè¦æ¸…é™¤ç€è¦½å™¨å¿«å–å—ï¼Ÿé€™å°‡æ¸…é™¤æ‰€æœ‰æš«å­˜çš„è³‡æ–™ã€‚')) {
        sessionStorage.clear();
        localStorage.clear();
        alert('å¿«å–å·²æ¸…é™¤ï¼è«‹é‡æ–°ç™»å…¥ã€‚');
        window.location.href = 'admin-login.html';
      }
    }
    
    // é¡¯ç¤ºç³»çµ±è³‡è¨Š
    function showSystemInfo() {
      const info = `
ç³»çµ±è³‡è¨Šï¼š
- ç€è¦½å™¨ï¼š${navigator.userAgent}
- è¢å¹•è§£æåº¦ï¼š${screen.width}x${screen.height}
- ç™»å…¥ç”¨æˆ¶ï¼š${currentUser.name}
- ç”¨æˆ¶è§’è‰²ï¼š${currentUser.role}
- ç™»å…¥æ™‚é–“ï¼š${new Date(sessionStorage.getItem('loginTime')).toLocaleString()}
- ç³»çµ±æ™‚é–“ï¼š${new Date().toLocaleString()}
      `;
      alert(info);
    }
    
    // å…¨åŸŸè®Šæ•¸
    let currentUser = null;
    
    // é é¢è¼‰å…¥æ™‚æª¢æŸ¥ç™»å…¥ç‹€æ…‹
    document.addEventListener('DOMContentLoaded', function() {
      // æª¢æŸ¥ç”¨æˆ¶ç™»å…¥ç‹€æ…‹
      currentUser = checkAuth();
      if (!currentUser) return;
      
      // æ›´æ–°ç”¨æˆ¶è³‡è¨Šé¡¯ç¤º
      updateUserInfo();
      
      // æ·»åŠ é é¢è¼‰å…¥å‹•ç•«
      document.body.style.opacity = '0';
      setTimeout(() => {
        document.body.style.transition = 'opacity 0.5s ease';
        document.body.style.opacity = '1';
      }, 100);
    });
  </script>
</body>
</html>
