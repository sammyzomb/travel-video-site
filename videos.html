<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>æ‰€æœ‰ç¯€ç›®ï½œèˆªå‘ä¸–ç•Œæ—…éŠé »é“</title>

  <!-- ä½ çš„å…¨ç«™æ¨£å¼ -->
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="favicon.png" type="image/png">

  <!-- å¿…è¦å¥—ä»¶ï¼šContentful + Twemoji -->
  <script src="https://cdn.jsdelivr.net/npm/contentful@latest/dist/contentful.browser.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/twemoji@14.0.2/dist/twemoji.min.js" crossorigin="anonymous"></script>

  <!-- ä¸»é¡Œæ©‹æ¥ï¼ˆè®“æœ¬é è·Ÿä½ çš„æ·±/æ·ºè‰²ä¸»é¡ŒåŒæ­¥ï¼‰ -->
  <style>
    :root{ --bg:#ffffff; --text:#111827; --card:#ffffff; --card-border:rgba(0,0,0,.06); }
    .dark-theme{ --bg:#0b1620; --text:#e5eef9; --card:#0f2133; --card-border:rgba(255,255,255,.06); }
    body{ background:var(--bg); color:var(--text); margin:0; }

    /* æœ¬é å¿…è¦æ¨£å¼ï¼ˆä½ çš„ style.css æœƒè¦†è“‹æ›´ç²¾ç·»çš„å¤–è§€ä¹ŸOKï¼‰ */
    .page-wrap { max-width: 1200px; margin: 0 auto; padding: 24px 5%; }
    .page-head { display:flex; align-items:center; gap:12px; margin: 8px 0 16px; }
    .page-head h1 { font-weight:900; font-size:28px; margin:0; }
    .hint { color:#8aa4c2; font-size:14px; }
    .quick-nav { display:flex; gap:8px; flex-wrap:wrap; margin: 10px 0 18px; }
    .quick-nav a { padding:6px 10px; border-radius:999px; background:#15314a; color:#b9d7ff; font-weight:700; text-decoration:none; }
    .continent-title { margin:24px 0 12px; font-size:26px; font-weight:900; border-left:6px solid #3fa0ff; padding-left:10px; }
    .country-title { margin:12px 0 8px; font-size:20px; font-weight:800; display:flex; align-items:center; gap:8px; }
    .country-flag { font-size:22px; line-height:1; display:inline-flex; align-items:center; }
    .country-flag img.emoji { height:1.2em; width:auto; vertical-align:-0.15em; }

    .video-grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap:16px; }
    .video-card { border-radius:16px; background:var(--card); border:1px solid var(--card-border); box-shadow:0 8px 24px rgba(0,0,0,.12); overflow:hidden; }
    .video-thumb { aspect-ratio:16/9; width:100%; overflow:hidden; border-bottom:1px solid var(--card-border); background:#e5e7eb; }
    .video-thumb img { width:100%; height:100%; object-fit:cover; display:block; }
    .video-content { padding:14px 16px; }
    .video-title { font-weight:900; font-size:18px; margin:6px 0; line-height:1.35; color:var(--text); }
    .video-desc { color:#93a6bf; font-size:14px; line-height:1.55; display:-webkit-box; -webkit-line-clamp:3; -webkit-box-orient:vertical; overflow:hidden; }
    .video-tags { color:#8aa4c2; font-size:13px; margin-bottom:6px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
    .video-cta { margin-top:10px; padding:10px 14px; border-radius:12px; border:0; background:#3fa0ff; color:#001528; font-weight:800; cursor:pointer; }
    .placeholder { border:1px dashed #3a5b7b; border-radius:12px; padding:24px; color:#8aa4c2; text-align:center; }
    @media (max-width:640px){ .page-wrap{ padding:18px 4%; } .page-head h1{ font-size:24px; } }
    /* çµ±ä¸€é™åˆ¶æ‰€æœ‰ Twemoji åœ–ç‰‡ï¼›é¿å…è¢«å…¨ç«™ img è¦å‰‡æ”¾å¤§ */
    img.emoji { height: 1em; width: auto; vertical-align: -0.15em; display: inline; }

  </style>
</head>
<body>

  <!-- å°è¦½åˆ—ï¼ˆæŠŠã€Œæ‰€æœ‰ç¯€ç›®ã€æŒ‡å‘æœ¬é  videos.htmlï¼‰ -->
  <div class="navbar">
    <a class="logo" href="index.html"><img src="logo.png" alt="èˆªå‘ä¸–ç•Œæ—…éŠé »é“ LOGO" /></a>
    <nav class="desktop-nav">
      <a href="index.html">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9L12 2L21 9V20a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
        <span class="nav-text">é¦–é </span>
      </a>
      <a href="videos.html">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><path d="M8 21h8m-4-4v4"/></svg>
        <span class="nav-text">æ‰€æœ‰ç¯€ç›®</span>
      </a>
      <a href="schedule.html">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
        <span class="nav-text">ç¯€ç›®è¡¨</span>
      </a>
      <a href="topics.html">
        <svg class="nav-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/></svg>
        <span class="nav-text">ä¸»é¡Œæ¢ç´¢</span>
      </a>
    </nav>

    <div class="nav-actions">
      <a href="#" id="theme-switcher" title="åˆ‡æ›ä¸»é¡Œ">
        <svg id="theme-icon-sun" class="nav-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg>
        <svg id="theme-icon-moon" class="nav-icon" style="display:none;" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg>
      </a>
      <a href="login.html" class="login-link">
        <svg class="nav-icon" viewBox="0 0 20 20" fill="none"><circle cx="10" cy="7" r="4.5" stroke-width="2"/><ellipse cx="10" cy="15.2" rx="6.8" ry="3.2" stroke-width="2"/></svg>
        <span class="nav-text">æœƒå“¡ç™»å…¥</span>
      </a>
      <button id="hamburger-btn" class="hamburger-btn">
        <svg viewBox="0 0 100 80" width="24" height="24"><rect width="100" height="15" rx="8"></rect><rect y="30" width="100" height="15" rx="8"></rect><rect y="60" width="100" height="15" rx="8"></rect></svg>
      </button>
    </div>
  </div>

  <div id="side-menu" class="side-menu">
    <a href="index.html">é¦–é </a>
    <a href="videos.html">æ‰€æœ‰ç¯€ç›®</a>
    <a href="schedule.html">ç¯€ç›®è¡¨</a>
    <a href="topics.html">ä¸»é¡Œæ¢ç´¢</a>
  </div>
  <div id="menu-overlay" class="menu-overlay"></div>

  <!-- å…§å®¹å€ï¼šæ‰€æœ‰ç¯€ç›® -->
  <main class="page-wrap">
    <div class="page-head">
      <h1>æ‰€æœ‰ç¯€ç›®</h1>
      <span class="hint">è‡ªå‹•ä¾ã€Œæ´² â†’ åœ‹å®¶ï¼ç¶œåˆã€åˆ†çµ„ï¼ˆå¾æ¨™é¡Œâ†’æ¨™ç±¤â†’èªªæ˜æ–‡å­—åµæ¸¬åœ‹å®¶ï¼‰</span>
    </div>
    <div id="all-videos"><div class="placeholder">è¼‰å…¥ä¸­â€¦</div></div>
  </main>

  <!-- ä½ çš„ä¸»ç«™ JSï¼ˆä¸»é¡Œåˆ‡æ› / æ¼¢å ¡é¸å–®ç­‰ï¼‰ -->
  <script src="script.js"></script>

  <!-- æœ¬é é‚è¼¯ï¼ˆåŒ…åœ¨ IIFEï¼Œé¿å…èˆ‡ script.js åç¨±è¡çªï¼‰ -->
  <script>
  (function(){
    'use strict';

    const $ = (s, el=document) => el.querySelector(s);
    const escapeHtml = (s='') => String(s).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;');
    const norm = (str='') => String(str).trim().toLowerCase().replace(/\s+/g,' ').replace(/[()ï¼ãƒ»Â·â€šâ€™'Â´`â€™â€˜"]/g,'').replace(/å°/g,'è‡º');

    const CONTINENTS = [
      { key:'asia', label:'äºæ´²' }, { key:'europe', label:'æ­æ´²' },
      { key:'north_america', label:'åŒ—ç¾æ´²' }, { key:'south_america', label:'å—ç¾æ´²' },
      { key:'africa', label:'éæ´²' }, { key:'oceania', label:'å¤§æ´‹æ´²' },
      { key:'antarctica', label:'å—æ¥µæ´²' }, { key:'other', label:'å…¶ä»–' },
    ];

    const REGION_HINTS = new Map([
      ['æ±äº','asia'],['æ±åŒ—äº','asia'],['æ±å—äº','asia'],['å—äº','asia'],['ä¸­äº','asia'],['è¥¿äº','asia'],['ä¸­æ±','asia'],
      ['æ­æ´²','europe'],['åŒ—æ­','europe'],['æ±æ­','europe'],['è¥¿æ­','europe'],['ä¸­æ­','europe'],['åœ°ä¸­æµ·','europe'],['å·´çˆ¾å¹¹','europe'],['æ–¯å ªåœ°é‚£ç¶­äº','europe'],
      ['åŒ—ç¾','north_america'],['å—ç¾','south_america'],['ä¸­å—ç¾','south_america'],
      ['éæ´²','africa'],['æ’’å“ˆæ‹‰','africa'],['æ’’å“ˆæ‹‰ä»¥å—éæ´²','africa'],
      ['å¤§æ´‹æ´²','oceania'],['å—å¤ªå¹³æ´‹','oceania'],['å—æ¥µ','antarctica'],['å—æ¥µæ´²','antarctica'],
      ['east asia','asia'],['southeast asia','asia'],['south asia','asia'],['central asia','asia'],['middle east','asia'],
      ['europe','europe'],['mediterranean','europe'],['balkans','europe'],['scandinavia','europe'],['nordic','europe'],
      ['north america','north_america'],['south america','south_america'],['latin america','south_america'],
      ['africa','africa'],['sub-saharan','africa'],['oceania','oceania'],['antarctica','antarctica'],
    ]);

    const COUNTRY_INDEX = [
      { country:'æ—¥æœ¬', aliases:['æ—¥æœ¬','ã«ã»ã‚“','nihon','nippon','japan','jp'], continent:'asia' },
      { country:'éŸ“åœ‹', aliases:['éŸ“åœ‹','å—éŸ“','ëŒ€í•œë¯¼êµ­','korea','south korea','kr'], continent:'asia' },
      { country:'å°ç£', aliases:['è‡ºç£','å°ç£','taiwan','tw'], continent:'asia' },
      { country:'ä¸­åœ‹', aliases:['ä¸­åœ‹','ä¸­åœ‹å¤§é™¸','china','cn'], continent:'asia' },
      { country:'è’™å¤', aliases:['è’™å¤','mongolia','mn'], continent:'asia' },
      { country:'å“ˆè–©å…‹', aliases:['å“ˆè–©å…‹','å“ˆè–©å…‹æ–¯å¦','kazakhstan','kz'], continent:'asia' },
      { country:'å‰çˆ¾å‰æ–¯', aliases:['å‰çˆ¾å‰æ–¯','å‰çˆ¾å‰æ–¯æ–¯å¦','kyrgyzstan','kg','kirgiz'], continent:'asia' },
      { country:'çƒèŒ²åˆ¥å…‹', aliases:['çƒèŒ²åˆ¥å…‹','çƒèŒ²åˆ¥å…‹æ–¯å¦','uzbekistan','uz'], continent:'asia' },
      { country:'å¡”å‰å…‹', aliases:['å¡”å‰å…‹','å¡”å‰å…‹æ–¯å¦','tajikistan','tj'], continent:'asia' },
      { country:'åœŸåº«æ›¼', aliases:['åœŸåº«æ›¼','åœŸåº«æ›¼æ–¯å¦','turkmenistan','tm'], continent:'asia' },
      { country:'å°åº¦', aliases:['å°åº¦','india','in'], continent:'asia' },
      { country:'æ³°åœ‹', aliases:['æ³°åœ‹','thailand','th'], continent:'asia' },
      { country:'è¶Šå—', aliases:['è¶Šå—','vietnam','vn'], continent:'asia' },
      { country:'é¦¬ä¾†è¥¿äº', aliases:['é¦¬ä¾†è¥¿äº','malaysia','my'], continent:'asia' },
      { country:'å°å°¼', aliases:['å°å°¼','å°åº¦å°¼è¥¿äº','indonesia','id'], continent:'asia' },
      { country:'å°¼æ³Šçˆ¾', aliases:['å°¼æ³Šçˆ¾','nepal','np'], continent:'asia' },
      { country:'ä»¥è‰²åˆ—', aliases:['ä»¥è‰²åˆ—','israel','il'], continent:'asia' },
      { country:'ç´„æ—¦', aliases:['ç´„æ—¦','jordan','jo'], continent:'asia' },
      { country:'åœŸè€³å…¶', aliases:['åœŸè€³å…¶','turkiye','turkey','tr'], continent:'asia' },

      { country:'ä¿„ç¾…æ–¯', aliases:['ä¿„ç¾…æ–¯','russia','ru'], continent:'europe' },
      { country:'èŠ¬è˜­', aliases:['èŠ¬è˜­','finland','fi'], continent:'europe' },
      { country:'æŒªå¨', aliases:['æŒªå¨','norway','no'], continent:'europe' },
      { country:'ç‘å…¸', aliases:['ç‘ç”¸','ç‘å…¸','sweden','se'], continent:'europe' },
      { country:'è‹±åœ‹', aliases:['è‹±åœ‹','uk','united kingdom','england','scotland','wales','northern ireland','gb'], continent:'europe' },
      { country:'æ³•åœ‹', aliases:['æ³•åœ‹','france','fr'], continent:'europe' },
      { country:'å¾·åœ‹', aliases:['å¾·åœ‹','germany','de'], continent:'europe' },
      { country:'ç¾©å¤§åˆ©', aliases:['ç¾©å¤§åˆ©','æ„å¤§åˆ©','italy','it'], continent:'europe' },
      { country:'è¥¿ç­ç‰™', aliases:['è¥¿ç­ç‰™','spain','es'], continent:'europe' },
      { country:'è‘¡è„ç‰™', aliases:['è‘¡è„ç‰™','portugal','pt'], continent:'europe' },
      { country:'æ·å…‹', aliases:['æ·å…‹','czech','czechia','cz'], continent:'europe' },
      { country:'å¥§åœ°åˆ©', aliases:['å¥§åœ°åˆ©','austria','at'], continent:'europe' },
      { country:'å†°å³¶', aliases:['å†°å³¶','iceland','is'], continent:'europe' },

      { country:'ç¾åœ‹', aliases:['ç¾åœ‹','usa','us','united states','america','u.s.'], continent:'north_america' },
      { country:'åŠ æ‹¿å¤§', aliases:['åŠ æ‹¿å¤§','canada','ca'], continent:'north_america' },
      { country:'å¢¨è¥¿å“¥', aliases:['å¢¨è¥¿å“¥','mexico','mx'], continent:'north_america' },

      { country:'å·´è¥¿', aliases:['å·´è¥¿','brazil','br'], continent:'south_america' },
      { country:'é˜¿æ ¹å»·', aliases:['é˜¿æ ¹å»·','argentina','ar'], continent:'south_america' },
      { country:'æ™ºåˆ©', aliases:['æ™ºåˆ©','chile','cl'], continent:'south_america' },
      { country:'ç¥•é­¯', aliases:['ç¥•é­¯','ç§˜é­¯','peru','pe'], continent:'south_america' },
      { country:'ç»åˆ©ç¶­äº', aliases:['ç»åˆ©ç¶­äº','bolivia','bo'], continent:'south_america' },
      { country:'å“¥å€«æ¯”äº', aliases:['å“¥å€«æ¯”äº','colombia','co'], continent:'south_america' },

      { country:'å—é', aliases:['å—é','south africa','za'], continent:'africa' },
      { country:'æ‘©æ´›å“¥', aliases:['æ‘©æ´›å“¥','morocco','ma'], continent:'africa' },
      { country:'åŸƒåŠ', aliases:['åŸƒåŠ','egypt','eg'], continent:'africa' },
      { country:'å¦å°šå°¼äº', aliases:['å¦å°šå°¼äº','å¦æ¡‘å°¼äº','tanzania','tz'], continent:'africa' },
      { country:'è‚¯äº', aliases:['è‚¯äº','kenya','ke'], continent:'africa' },

      { country:'æ¾³æ´²', aliases:['æ¾³æ´²','æ¾³å¤§åˆ©äº','australia','au'], continent:'oceania' },
      { country:'ç´è¥¿è˜­', aliases:['ç´è¥¿è˜­','æ–°è¥¿è˜­','new zealand','nz'], continent:'oceania' },
    ];

    const COUNTRY_FLAGS = {
      'æ—¥æœ¬':'ğŸ‡¯ğŸ‡µ','éŸ“åœ‹':'ğŸ‡°ğŸ‡·','å°ç£':'ğŸ‡¹ğŸ‡¼','ä¸­åœ‹':'ğŸ‡¨ğŸ‡³','è’™å¤':'ğŸ‡²ğŸ‡³','å“ˆè–©å…‹':'ğŸ‡°ğŸ‡¿','å‰çˆ¾å‰æ–¯':'ğŸ‡°ğŸ‡¬','çƒèŒ²åˆ¥å…‹':'ğŸ‡ºğŸ‡¿','å¡”å‰å…‹':'ğŸ‡¹ğŸ‡¯','åœŸåº«æ›¼':'ğŸ‡¹ğŸ‡²',
      'å°åº¦':'ğŸ‡®ğŸ‡³','æ³°åœ‹':'ğŸ‡¹ğŸ‡­','è¶Šå—':'ğŸ‡»ğŸ‡³','é¦¬ä¾†è¥¿äº':'ğŸ‡²ğŸ‡¾','å°å°¼':'ğŸ‡®ğŸ‡©','å°¼æ³Šçˆ¾':'ğŸ‡³ğŸ‡µ','ä»¥è‰²åˆ—':'ğŸ‡®ğŸ‡±','ç´„æ—¦':'ğŸ‡¯ğŸ‡´','åœŸè€³å…¶':'ğŸ‡¹ğŸ‡·',
      'ä¿„ç¾…æ–¯':'ğŸ‡·ğŸ‡º','èŠ¬è˜­':'ğŸ‡«ğŸ‡®','æŒªå¨':'ğŸ‡³ğŸ‡´','ç‘å…¸':'ğŸ‡¸ğŸ‡ª','è‹±åœ‹':'ğŸ‡¬ğŸ‡§','æ³•åœ‹':'ğŸ‡«ğŸ‡·','å¾·åœ‹':'ğŸ‡©ğŸ‡ª','ç¾©å¤§åˆ©':'ğŸ‡®ğŸ‡¹','è¥¿ç­ç‰™':'ğŸ‡ªğŸ‡¸','è‘¡è„ç‰™':'ğŸ‡µğŸ‡¹','æ·å…‹':'ğŸ‡¨ğŸ‡¿','å¥§åœ°åˆ©':'ğŸ‡¦ğŸ‡¹','å†°å³¶':'ğŸ‡®ğŸ‡¸',
      'ç¾åœ‹':'ğŸ‡ºğŸ‡¸','åŠ æ‹¿å¤§':'ğŸ‡¨ğŸ‡¦','å¢¨è¥¿å“¥':'ğŸ‡²ğŸ‡½',
      'å·´è¥¿':'ğŸ‡§ğŸ‡·','é˜¿æ ¹å»·':'ğŸ‡¦ğŸ‡·','æ™ºåˆ©':'ğŸ‡¨ğŸ‡±','ç¥•é­¯':'ğŸ‡µğŸ‡ª','ç»åˆ©ç¶­äº':'ğŸ‡§ğŸ‡´','å“¥å€«æ¯”äº':'ğŸ‡¨ğŸ‡´',
      'å—é':'ğŸ‡¿ğŸ‡¦','æ‘©æ´›å“¥':'ğŸ‡²ğŸ‡¦','åŸƒåŠ':'ğŸ‡ªğŸ‡¬','å¦å°šå°¼äº':'ğŸ‡¹ğŸ‡¿','è‚¯äº':'ğŸ‡°ğŸ‡ª',
      'æ¾³æ´²':'ğŸ‡¦ğŸ‡º','ç´è¥¿è˜­':'ğŸ‡³ğŸ‡¿'
    };
    const getFlag = (country) => COUNTRY_FLAGS[country] || '';

    const ALIAS_EXACT = new Map();
    const ALIAS_TEXT = [];
    for (const row of COUNTRY_INDEX) {
      for (const a of row.aliases) {
        const key = norm(a);
        ALIAS_EXACT.set(key, { country: row.country, continent: row.continent });
        if (key.length >= 2) ALIAS_TEXT.push({ alias: key, country: row.country, continent: row.continent });
      }
    }
    ALIAS_TEXT.sort((a,b)=>b.alias.length-a.alias.length);

    function guessCountryAndContinent({ title='', desc='', tags=[] }) {
      const nt = norm(title), nd = norm(desc);
      const nTags = (Array.isArray(tags) ? tags : []).map(t => norm(String(t))).filter(Boolean);

      for (const t of nTags) { const hit = ALIAS_EXACT.get(t); if (hit) return hit; }
      for (const row of ALIAS_TEXT) if (nt.includes(row.alias)) return row;
      for (const row of ALIAS_TEXT) if (nd.includes(row.alias)) return row;

      for (const t of nTags) { const cont = REGION_HINTS.get(t); if (cont) return { country:null, continent:cont }; }
      for (const [hint, cont] of REGION_HINTS.entries()) {
        const h = norm(hint); if (h.length>2 && (nt.includes(h) || nd.includes(h))) return { country:null, continent:cont };
      }
      return { country:null, continent:'other' };
    }

    function classifyItem(v) {
      const { country, continent } = guessCountryAndContinent({ title:v.title||'', desc:v.desc||'', tags:v.tags||[] });
      const contKey = continent || 'other';
      const contLabel = (CONTINENTS.find(c=>c.key===contKey)||{label:'å…¶ä»–'}).label;
      let countryKey = country ? norm(country) : 'mixed';
      let countryLabel = country || 'ç¶œåˆ';
      return { continentKey:contKey, continentLabel:contLabel, countryKey, countryLabel };
    }

    (async function run(){
      const container = $('#all-videos');
      if (!container) return;
      container.innerHTML = '<div class="placeholder">è¼‰å…¥ä¸­â€¦</div>';

      let res;
      try {
        const client = window.contentful.createClient({
          space: 'os5wf90ljenp',
          accessToken: 'lODH-WLwHwVZv7O4rFdBWjSnrzaQWGD4koeOZ1Dypj0'
        });
        res = await client.getEntries({ content_type:'video', order:'-sys.updatedAt', limit:500 });
      } catch (e) {
        console.error('Contentful é€£ç·šå¤±æ•—ï¼ˆvideos.htmlï¼‰ï¼š', e);
        container.innerHTML = '<div class="placeholder">âŒ ç›®å‰ç„¡æ³•è¼‰å…¥æ‰€æœ‰ç¯€ç›®ã€‚</div>';
        return;
      }

      const pick = (obj, keys) => { for (const k of keys) if (obj && obj[k]!=null && obj[k]!=='') return obj[k]; return ''; };
      const items = (res.items||[]).map(it=>{
        const f = it.fields||{};
        const title = pick(f,['å½±ç‰‡æ¨™é¡Œ','title']);
        const desc  = pick(f,['ç²¾é¸æ¨è–¦å½±ç‰‡èªªæ˜æ–‡å­—','description']);
        const ytid  = pick(f,['YouTube ID','youTubeId']);
        const mp4   = pick(f,['MP4 å½±ç‰‡ç¶²å€','mp4Url']);
        const tags  = Array.isArray(f.tags)?f.tags:[];
        let thumb   = f.thumbnail?.fields?.file?.url || '';
        if (thumb && !thumb.startsWith('http')) thumb = 'https:' + thumb;
        if (!thumb && ytid) thumb = `https://i.ytimg.com/vi/${ytid}/hqdefault.jpg`;
        return { title, desc, ytid, mp4, tags, thumb };
      });

      // åˆ†çµ„
      const groups = {};
      for (const v of items) {
        const slot = classifyItem(v);
        groups[slot.continentKey] ??= { label: slot.continentLabel, countries:{} };
        groups[slot.continentKey].countries[slot.countryKey] ??= { label: slot.countryLabel, items: [] };
        groups[slot.continentKey].countries[slot.countryKey].items.push(v);
      }

      // æ¸²æŸ“
      container.innerHTML = '';

      // æ´²åˆ¥å¿«é€ŸéŒ¨é»
      const nav = document.createElement('div');
      nav.className = 'quick-nav';
      for (const c of CONTINENTS) {
        if (!groups[c.key]) continue;
        const a = document.createElement('a');
        a.href = `#cont-${c.key}`;
        a.textContent = c.label;
        nav.appendChild(a);
      }
      container.appendChild(nav);

      for (const c of CONTINENTS) {
        const node = groups[c.key];
        if (!node) continue;

        const contSection = document.createElement('section');
        contSection.id = `cont-${c.key}`;
        contSection.innerHTML = `<h2 class="continent-title">${node.label}</h2><div class="continent-body"></div>`;
        container.appendChild(contSection);
        const body = contSection.querySelector('.continent-body');

        const entries = Object.entries(node.countries).sort((a,b)=>{
          const A = a[1].label === 'ç¶œåˆ' ? '~~~' : a[1].label;
          const B = b[1].label === 'ç¶œåˆ' ? '~~~' : b[1].label;
          return String(A).localeCompare(String(B), 'zh-Hant');
        });

        for (const [ckey, bucket] of entries) {
          const flag = bucket.label === 'ç¶œåˆ' ? '' : getFlag(bucket.label);
          const block = document.createElement('div');
          block.id = `country-${c.key}-${ckey}`;
          block.innerHTML = `
            <h3 class="country-title">
              ${flag ? `<span class="country-flag">${flag}</span>` : ''}
              ${bucket.label}
            </h3>
            <div class="video-grid"></div>`;
          body.appendChild(block);

          const grid = block.querySelector('.video-grid');
          const frag = document.createDocumentFragment();

          bucket.items.forEach(v=>{
            const safeTitle = escapeHtml(v.title || 'æœªå‘½åå½±ç‰‡');
            const safeDesc  = v.desc ? escapeHtml(v.desc) : '';
            const ytFallback = v.ytid ? `https://i.ytimg.com/vi/${v.ytid}/hqdefault.jpg` : '';

            const card = document.createElement('div');
            card.className = 'video-card';
            card.innerHTML = `
              <div class="video-thumb">
                ${v.thumb ? `<img src="${v.thumb}" alt="${safeTitle}" loading="lazy" decoding="async"
                              onerror="this.onerror=null;this.src='${ytFallback}';">`
                          : `<div style="width:100%;height:100%;background:#e5e7eb;"></div>`}
              </div>
              <div class="video-content">
                ${Array.isArray(v.tags)&&v.tags.length ? `<div class="video-tags">${v.tags.map(t=>escapeHtml(String(t))).join(' / ')}</div>` : ``}
                <div class="video-title">${safeTitle}</div>
                ${safeDesc ? `<div class="video-desc">${safeDesc}</div>` : ``}
                ${
                  v.ytid
                    ? `<button class="video-cta" data-videoid="${escapeHtml(v.ytid)}">ç«‹å³è§€çœ‹</button>`
                    : (v.mp4 ? `<a class="video-cta" href="${escapeHtml(v.mp4)}" target="_blank" rel="noopener">æ’­æ”¾ MP4</a>` : ``)
                }
              </div>`;
            frag.appendChild(card);
          });
          grid.appendChild(frag);
        }
      }

     // åªæŠŠã€Œåœ‹æ——ã€è½‰æˆ SVGï¼Œé¿å…æè¿°è£¡çš„ emoji è¢«æ”¾å¤§
if (window.twemoji) {
  document.querySelectorAll('.country-flag').forEach(node => {
    twemoji.parse(node, {
      base: 'https://cdn.jsdelivr.net/gh/twitter/twemoji@14.0.2/assets/',
      folder: 'svg',
      ext: '.svg'
    });
  });
}


      // é»å¡ç‰‡æ’­æ”¾ï¼ˆè‹¥é¦–é æœ‰ openFullscreenPlayer å°±æ²¿ç”¨ï¼Œå¦å‰‡æ–°åˆ†é ï¼‰
      document.body.addEventListener('click', (e)=>{
        const btn = e.target?.closest?.('.video-cta');
        if (!btn) return;
        const id = btn.dataset.videoid;
        if (!id) return;
        if (typeof window.openFullscreenPlayer === 'function') {
          window.openFullscreenPlayer(id);
        } else {
          window.open(`https://www.youtube.com/watch?v=${encodeURIComponent(id)}`, '_blank', 'noopener');
        }
      });
    })();
  })();
  </script>
</body>
</html>
